import { ServerChatMessage } from "./ServerChatMessage"

const payload = [0x01,0x00,0x00,0x00,0x00,0x63,0x00,0x23,0x00,0x20,0x00,0x53,0x00,0x65,0x00,0x72,0x00,0x76,0x00,0x65,0x00,0x72,0x00,0x3a,0x00,0x20,0x00,0x76,0x00,0x65,0x00,0x72,0x00,0x73,0x00,0x69,0x00,0x6f,0x00,0x6e,0x00,0x3a,0x00,0x20,0x00,0x35,0x00,0x2e,0x00,0x36,0x00,0x2e,0x00,0x31,0x00,0x20,0x00,0x7c,0x00,0x20,0x00,0x67,0x00,0x61,0x00,0x6d,0x00,0x65,0x00,0x3a,0x00,0x20,0x00,0x4d,0x00,0x69,0x00,0x6e,0x00,0x65,0x00,0x74,0x00,0x65,0x00,0x73,0x00,0x74,0x00,0x20,0x00,0x47,0x00,0x61,0x00,0x6d,0x00,0x65,0x00,0x20,0x00,0x7c,0x00,0x20,0x00,0x75,0x00,0x70,0x00,0x74,0x00,0x69,0x00,0x6d,0x00,0x65,0x00,0x3a,0x00,0x20,0x00,0x31,0x00,0x33,0x00,0x6d,0x00,0x69,0x00,0x6e,0x00,0x20,0x00,0x32,0x00,0x32,0x00,0x73,0x00,0x20,0x00,0x7c,0x00,0x20,0x00,0x6d,0x00,0x61,0x00,0x78,0x00,0x20,0x00,0x6c,0x00,0x61,0x00,0x67,0x00,0x3a,0x00,0x20,0x00,0x30,0x00,0x2e,0x00,0x30,0x00,0x39,0x00,0x73,0x00,0x20,0x00,0x7c,0x00,0x20,0x00,0x63,0x00,0x6c,0x00,0x69,0x00,0x65,0x00,0x6e,0x00,0x74,0x00,0x73,0x00,0x3a,0x00,0x20,0x00,0x74,0x00,0x65,0x00,0x73,0x00,0x74,0x00,0x00,0x00,0x00,0x64,0x26,0x9c,0xc3]

describe("ServerChatMessage", function() {
    test("parse", function() {
        const dv = new DataView(Uint8Array.from(payload).buffer)
        const cmd = new ServerChatMessage()
        cmd.unmarshalPacket(dv)

        expect(cmd.message).toBe("# Server: version: 5.6.1 | game: Minetest Game | uptime: 13min 22s | max lag: 0.09s | clients: test")
    })
})